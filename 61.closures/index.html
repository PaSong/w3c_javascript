<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <h1>Closures</h1>
    <p>자바스크립트 변수는 로컬 또는 전역 범위에 속할 수 있음</p>
    <p>전역 변수는 closures를 사용하여 로컬(개인)으로 만들 수 있음</p>

    <h2>전역 변수</h2>
    <p>전역변수는 웹 페이지에서 전역 변수는 윈도우 객체에 속함</p>
    <p>전역 변수는 페이지의 모든 스크립트에서 사용 할 수 있음</p>

    <p>지역변수</p>
    <p>로컬 변수는 정의 된 함수 내에서만 사용할 수 있음</p>
    <p>다른 함수 및 다른 스크립팅 코드에서 숨겨짐</p>
    <p>같은 이름의 전역 변수와 지역 변수는 서로 다른 변수임</p>
    <p>하나를 수정하면 다른 하나를 수정하지 않음</p>

    <span>var 키워드 없이 작성된 변수는 함수내에 작성된 경우에도 항상 전역 변수!</span>

    <h2>가변 수명</h2>
    <p>전역 변수는 응용 프로그램(창/ 웹페이지)이 살아있는 한 계속 살 수 있음</p>
    <p>지역변수의 수명은 짧음. 함수가 호출 될 떄 만들어지며 함수가 끝나면 삭제됨</p>

    <h2>카운터 딜레마</h2>
    <p>
        //Function to increment counter
        function add() {
            counter = 0;
            counter += 1;
            return counter;
        }
        //Trying to increment the counter
        function myFunction() {
            document.getElementById("demo").innerHTML = add();
        }

        // The counter should now be 3. but it is 1
    </p>

    <p>우리가 함수를 호출 할 때마다 로컬 카운터를 설정하기 때문에 작동하지 않음</p>

    <h2>자바스크립트 중첩 함수</h2>
    <p>모든 기능은 전역 범위에 액세스 할 수 있음</p>
    <p>실제로 자바스크립트에서는 모든 함수가 위의 범위에 액세스 할 수 있음</p>
    <p>
        document.getElementById("demo").innerHTML = add();
        function add(){
            var counter = 0;
            function plus() {counter += 1;}
            plus();
            return counter;
        }

        // 1
    </p>
    <p>plus()외부에서 기능에 도달 살 수 있다면 카운터 딜레마를 해결할 수 있음</p>
    <p>또한 counter = 0 한번만 실행하는 방법을 찾아야 함.</p>
    <p>우리는 폐쇄가 필요함</p>

    <h2>자바스크립트 클로저</h2>
    <p>
        var add = (function () {
            var counter = 0;
            return function () {counter += 1; return counter;}
        })();

        function myFunction() {
            document.getElementById("demo").innerHTML = add();
        }
    </p>
    <p>변수 add에는 자체 호출 함수의 리턴값이 지정됨</p>
    <p>자체 호출 함수는 한번만 실행됨</p>
    <p>카운터를 0으로 설정하고 함수 표현식을 반환함</p>
    <span>클로저는 부모 함수가 닫힌 후에도 부모 범위에 액세스 하는 함수</span>
</body>
</html>